body {
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #000;
    overflow: hidden; /* Garante que nada saia da tela */
}

/* --- NOVO: Estilos da Tela de Início --- */
#start-screen {
    position: absolute; /* Para cobrir toda a tela */
    top: 0;
    left: 0;
    width: 100vw; /* 100% da largura da viewport */
    height: 100vh; /* 100% da altura da viewport */
    background-image: url('telaInicio.jpg'); /* Sua imagem de fundo */
    background-size: auto; /* Remove o 'cover' para usar o tamanho original */
    background-repeat: no-repeat; /* Impede que a imagem se repita */
    background-position: center; /* Centraliza a imagem na tela */
    display: flex; 
    flex-direction: column; 
    justify-content: flex-end; 
    align-items: center; 
    z-index: 100;
}

#startButton {
    width: 200px; /* Tamanho reduzido do botão */
    height: auto; /* Mantém a proporção */
    margin-bottom: 10vh; /* Ajusta a posição do meio para baixo */
    cursor: pointer;
    
    /* --- ANIMAÇÃO DE AUMENTAR/DIMINUIR --- */
    animation: pulse 1.5s infinite alternate; /* Nome, duração, repetição, direção */
}

/* --- Definição da Animação 'pulse' --- */
@keyframes pulse {
    from {
        transform: scale(0.95); /* Começa um pouco menor */
    }
    to {
        transform: scale(1.05); /* Vai um pouco maior */
    }
}

/* --- NOVO: Estilos da Tela do Jogo --- */
#game-screen {
    /* Inicialmente escondida */
    display: none; 
    width: 100vw;
    height: 100vh;
    display: flex; /* Para centralizar o game-container */
    justify-content: center;
    align-items: center;
}

/* O restante do seu CSS para o #game-container, #game-map e #player */
/* Permanece o mesmo de antes */

#game-container {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    position: relative;
    background-color: #000; /* Para evitar que veja o fundo preto do body */
}

#game-map {
    position: relative;
    background-image: url('mapaoficial.png');
    background-repeat: no-repeat;
    width: 4096px; 
    height: 4096px;
}
/* --- NOVO: Efeito Vignette (Among Us) --- */
#game-map::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    
    /* Esta é a escuridão translúcida que você pediu */
    background-color: rgba(0, 0, 0, 0.85);

    /* O círculo de luz transparente */
    background-image: radial-gradient(
        circle at center, /* Raio do círculo de luz */
        transparent 150px, /* Luz total */
        rgba(0, 0, 0, 0.85) 500px /* Escuridão */
    );
    
    background-repeat: no-repeat;
    background-size: 1778px 1000px; /* 2x o raio */
    
    /* Pega a posição do jogador do JavaScript */
    background-position: var(--vignette-x) var(--vignette-y);

    z-index: 1; /* Fica em cima do mapa */
    pointer-events: none; /* Deixa o mouse "atravessar" */
    
    /* Começa escondido */
    display: none; 
}
#game-map.phase-2-active::before {
    display: block;
}
#player {
    position: absolute;
    left: 1500px; 
    top: 1250px;
    width: 200px;
    height: auto; 
    user-select: none;
    -webkit-user-drag: none;
    filter: drop-shadow(0px 5px 3px rgba(0, 0, 0, 0.5));
    z-index: 2;
}

/* --- NOVO: Estilos do Minimapa --- */

/* O ícone no canto superior direito */
#minimap-icon-container {
    position: absolute; 
    top: 20px;
    right: 20px;
    
    /* --- MUDANÇA AQUI --- */
    /* Z-index (210) é maior que o do overlay (200),
       para o botão ficar na FRENTE do fundo borrado. */
    z-index: 210; 
}

#minimap-toggle-button {
    width: 64px; 
    height: 64px;
    cursor: pointer;
    border-radius: 10px;
    transition: transform 0.2s;
    /* --- Borda removida daqui --- */
}

#minimap-toggle-button:hover {
    transform: scale(1.1);
}

/* O fundo borrado de tela cheia */
#minimap-overlay {
    position: fixed; 
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    backdrop-filter: blur(5px);
    background-color: rgba(0, 0, 0, 0.3); 
    z-index: 200; /* Fica por cima do JOGO */
    display: none; 
    justify-content: center;
    align-items: center;
}

/* O container do mapa grande (para centralizar) */
#minimap-large-container {
    position: relative; 
    display: none; 
    z-index: 201; /* Fica por cima do overlay */
}

#minimap-large-image {
    height: 80vh; 
    width: auto;
    border-radius: 5px;
    /* --- Borda removida daqui --- */
}

/* O ponto vermelho do jogador */
#minimap-player-dot {
    position: absolute;
    width: 15px;
    height: 15px;
    background-color: red;
    border: 2px solid white;
    border-radius: 50%;
    box-shadow: 0 0 8px red;
}

/* Fundo escuro atrás do diálogo para focar a atenção */
#dialogue-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background-color: rgba(0, 0, 0, 0.6); /* Semi-transparente */
    z-index: 2000; /* Acima de tudo */
    display: flex;
    justify-content: center;
    align-items: end; /* Fica na parte de baixo da tela */
    padding-bottom: 50px;
}

/* Atualize o #dialogue-box */
#dialogue-box {
    position: relative;
    width: 800px;
    height: 180px; /* Altura fixa */
    background: rgba(0, 20, 40, 0.95); /* Fundo azul escuro sci-fi */
    border: 2px solid #00FFFF;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
    
    display: flex;
    align-items: center;
    padding-left: 120px; /* Espaço para o Robô não ficar em cima do texto */
    padding-right: 20px;
}

/* NOVO: Área do Texto */
#dialogue-content {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center; /* Centraliza verticalmente */
    justify-content: flex-start;
    padding: 20px;
    overflow: hidden;
}

/* O Texto em si */
#typewriter-text {
    font-family: 'Courier New', Courier, monospace; /* Fonte estilo terminal */
    font-size: 1.4em;
    color: #00FFFF; /* Texto Ciano */
    text-shadow: 0 0 5px #00FFFF;
    margin: 0;
    line-height: 1.5;
    white-space: pre-wrap; /* Mantém quebras de linha se houver */
}

/* Cursor piscando no final da frase */
#blink-cursor {
    font-size: 1.4em;
    color: #00FFFF;
    animation: cursor-blink 0.8s infinite;
    margin-left: 5px;
}

@keyframes cursor-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

/* (Remova o estilo antigo de #current-dialogue-gif pois não existe mais) */

/* Container do Avatar (Robô + Nome) */
#gyro-container {
    position: absolute;
    top: -80px; /* Sobe para ficar metade fora da caixa */
    left: -20px; /* Fica no canto esquerdo */
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 2001;
}

/* Imagem do Robô */
#gyro-img {
    width: 120px; /* Tamanho do robô */
    height: 120px;
    object-fit: cover;
    border: 3px solid #00FFFF;
    border-radius: 50%; /* Faz ficar redondo */
    background-color: #000;
    box-shadow: 0 0 15px #00FFFF;
}

/* Nome GYRO */
#gyro-name {
    margin-top: -10px; /* Sobe um pouco pra colar no robô */
    background-color: #00FFFF;
    color: black;
    font-weight: bold;
    font-family: monospace;
    padding: 2px 10px;
    border-radius: 5px;
    border: 2px solid white;
    font-size: 1.2em;
    z-index: 2002;
}

#skip-dialogue {
    position: absolute;
    bottom: -30px;
    color: white;
    font-size: 0.8em;
    font-family: sans-serif;
    opacity: 0.7;
    animation: blink 2s infinite;
}

@keyframes blink { 50% { opacity: 0.3; } }
/* ... (Todo o seu CSS anterior) ... */

/* --- NOVO: Estilos da Luz de Alerta --- */
#alert-light {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw; /* Cobre o canto superior esquerdo */
    height: 100vw; /* Cobre o canto superior esquerdo */
    background: radial-gradient(circle at top left, rgba(255, 0, 0, 0.4) 0%, transparent 100%);
    pointer-events: none; /* Permite clicar através dele */
    z-index: 15; /* Fica acima do mapa, mas abaixo do mini-mapa */
    opacity: 0;
    animation: alert-pulse 4s infinite; /* Animação intermitente */
}

@keyframes alert-pulse {
    0%, 75% { /* Desligado por 3 segundos (0% a 75% de 4s) */
        opacity: 0;
    }
    76%, 100% { /* Ligado por 1 segundo (76% a 100% de 4s) */
        opacity: 0.4;
    }
}

/* --- NOVO: Animação SÓ PARA A SETA --- */
@keyframes arrow-pulse {
    0%, 75% { /* Desligado por 3 segundos */
        opacity: 0;
    }
    76%, 100% { /* Ligado por 1 segundo */
        opacity: 1; /* Totalmente visível */
    }
}

/* --- NOVO: Estilos do Ponto de Interação (círculo preto) --- */
#mission-hotspot {
    position: absolute;
    width: 150px;  /* Ajuste o tamanho da animação */
    height: 193px; /* Ajuste a altura */
    cursor: pointer;
    z-index: 5; /* Fica acima do mapa */
    
    /* Posição (mantenha a sua) */
    left: 1750px; 
    top: 900px;
    z-index: 2;
}

/* --- NOVO: Mensagem de Interação --- */
#interaction-message {
    position: absolute;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 5px 10px;
    border-radius: 5px;
    font-family: sans-serif;
    font-size: 0.9em;
    white-space: nowrap;
    display: none; /* Escondido por padrão */
    z-index: 6; /* Acima do hotspot */
    /* Posicione-o um pouco acima do hotspot */
    left: 1730px; /* Exemplo: Ajuste X */
    top: 860px; /* Exemplo: Ajuste Y */
}


/* --- NOVO: Tela do Jogo de Puzzle --- */
#puzzle-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.8); /* Fundo escuro */
    display: none; /* Escondido por padrão */
    justify-content: center;
    align-items: center;
    z-index: 300; /* Acima de tudo */
}

/* --- ESTILO DO QUEBRA-CABEÇA (GRAFO) --- */

/* NOVO: O wrapper que centraliza no flexbox */
#puzzle-wrapper {
    position: relative; /* Permite o empilhamento */
}

/* MODIFICADO: A imagem agora é a base */
#puzzle-image {
    max-width: 80%; 
    max-height: 80%;
    border: 5px solid #ffcc00; 
    box-shadow: 0 0 20px rgba(255, 204, 0, 0.7);
    /* Importante: Garante que o wrapper tenha o tamanho da imagem */
    display: block; 
}

/* NOVO: A camada interativa que fica sobre a imagem */
#graph-interactive-layer {
    position: absolute;
    top: 0;
    left: 0;
    /* Ajusta ao tamanho da imagem (contando a borda) */
    width: calc(100% - 10px); /* 100% menos 5px da borda esquerda + 5px da direita */
    height: calc(100% - 10px);/* 100% menos 5px da borda topo + 5px da base */
    margin: 5px; /* Compensa as bordas */
}

/* Estilo para todos os nós */
.node {
    position: absolute;
    width: 100px;
    height: 100px;
    border-radius: 50%;
    cursor: pointer;
    z-index: 10;
    /* Estilo do "X" */
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2em;
    font-weight: bold;
    color: white;
    font-family: sans-serif;
    text-shadow: 0 0 5px black;
}

/* Posições exatas dos nós sobre a imagem de fundo */
/* (Estes valores são % da camada, podem precisar de ajuste fino) */
#n1 { left: 15.0%; top: 45.4%; } /* Nó Vermelho left: 18.0%; top: 51.4%;*/
#n2 { left: 27.4%; top: 21.1%; }
#n3 { left: 46.6%; top: 20.9%; }
#n4 { left: 46.5%; top: 69.5%; }
#n5 { left: 27.4%; top: 69.5%; }
#n6 { left: 59.1%; top: 45.6%; } /* Nó Azul */

/* Estilo para os pesos (números) */
.edge-weight {
    position: absolute;
    color: white;
    font-size: 0.9em;
    font-weight: bold;
    z-index: 5;
    text-shadow: 0 0 3px black;
    pointer-events: none; 
    transform: translate(-50%, -50%); /* Centraliza o texto na posição */
}

/* Onde as linhas neon são desenhadas */
#neon-lines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 8;
    pointer-events: none;
}

/* Estilo da linha neon */
.neon-line {
    stroke: #FFFF00; /* Amarelo Neon */
    stroke-width: 4;
    stroke-linecap: round;
    /* Efeito de Brilho */
    filter: drop-shadow(0 0 3px #FFFF00) drop-shadow(0 0 5px #FFFF00);
}

/* Mensagem de Erro */
#puzzle-error {
    position: absolute;
    bottom: 20vh; /* Posição na tela */
    padding: 10px 20px;
    background-color: #D32F2F; /* Vermelho */
    color: white;
    border-radius: 5px;
    font-family: sans-serif;
    font-weight: bold;
    z-index: 400; /* Acima de tudo */
    display: none; /* Começa escondido */
}

#close-puzzle-button {
    position: absolute;
    top: 10vh; /* Ajuste para ficar em cima da imagem */
    right: 10vw; /* Ajuste para ficar em cima da imagem */
    background-color: red;
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 1.5em;
    cursor: pointer;
    display: none; /* Escondido por padrão, aparece com a tela do puzzle */
    z-index: 301;
}
/* --- NOVO: Estilo da Seta Guia --- */
/* --- MUDANÇA: Estilo da Seta Guia (Amarela e Alongada) --- */
#mission-arrow {
    position: absolute;
    width: 0;
    height: 0;
    
    /* --- MUDANÇA AQUI: Valores Maiores --- */
    border-top: 22px solid transparent; /* Antes era 15px */
    border-bottom: 22px solid transparent; /* Antes era 15px */
    border-left: 52px solid #FFD700; /* Antes era 35px */
    
    z-index: 16; 
    pointer-events: none;
    opacity: 0;
    animation: arrow-pulse 4s infinite;
    top: 50vh;
    left: 50vw;
    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.8));
}

/* --- NOVO: Estilos de Feedback do Puzzle --- */
#puzzle-feedback {
    position: absolute;
    bottom: 20vh;
    padding: 10px 20px;
    color: white;
    border-radius: 5px;
    font-family: sans-serif;
    font-weight: bold;
    z-index: 400;
    display: none;
    text-align: center;
    max-width: 300px;
}

#puzzle-feedback.success {
    background-color: #4CAF50; /* Verde */
}

#puzzle-feedback.failure {
    background-color: #D32F2F; /* Vermelho */
}
/* --- NOVO: Estilos da Missão Elétrica --- */
#elétrica-hotspot {
    position: absolute;
    width: 50px;  /* Tamanho da área clicável */
    height: 50px;
    background-color: rgba(0, 255, 0, 0);  /* (Descomente para ver) */
    cursor: pointer;
    z-index: 10; 
    /* !!! VOCÊ PRECISA POSICIONAR ISSO !!! */
    /* Use as coordenadas da sala Elétrica */
    left: 150px; 
    top: 1900px;
}

#elétrica-interaction-message {
    position: absolute;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 5px 10px;
    border-radius: 5px;
    font-family: sans-serif;
    font-size: 0.9em;
    white-space: nowrap;
    display: none;  /*Escondido por padrão */
    z-index: 3; /*3
    
    /* !!! VOCÊ PRECISA POSICIONAR ISSO !!! */
    /* Perto do hotspot da Elétrica */
    left: 80px; 
    top: 1900px; 
}
/* --- Estilos da Imagem da Elétrica (Visual) --- */
#elétrica-visual {
    position: absolute;
    /* Ajuste essas coordenadas para ficarem EXATAMENTE em cima da área da elétrica no desenho */
    left: 30px; 
    top: 1270px;
    
    width: 1300px; /* Coloque o valor que achar melhor (ex: 150px, 300px...) */
    height: auto; /* Mantém a proporção original */
    z-index: 4; /* Fica acima do mapa, mas abaixo do jogador e da escuridão */
    pointer-events: none; /* O mouse ignora a imagem (não atrapalha o clique) */
    
    display: none; /* Começa escondido */
    opacity: 0.8;
}

#game-map.phase-2-active #elétrica-visual {
    display: block;
    animation: electric-pulse 2s infinite ease-in-out;
}

/* Animação de piscar (Efeito Neon) */
@keyframes electric-pulse {
    0% {
        opacity: 0.3;
    }
    50% {
        opacity: 1;
    }
    100% {
        opacity: 0.3;
    }
}

/* --- TELA DO PUZZLE ELÉTRICO --- */
#electric-puzzle-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.9);
    display: none; /* Começa escondido */
    justify-content: center;
    align-items: center;
    z-index: 350; /* Acima de tudo */
}

#electric-wrapper {
    position: relative;
    width: 80%; /* Ajuste o tamanho da janela do puzzle */
    max-width: 1000px;
}

#electric-bg-image {
    width: 100%;
    height: auto;
    display: block;
    border: 4px solid #333;
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
}

#electric-interactive-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

/* --- PONTOS (NODES) --- */
.elec-node {
    position: absolute;
    width: 20px;   /* Tamanho da área de clique */
    height: 20px;
    background-color: transparent; /* Vermelho translúcido */
    border-radius: 50%;
    cursor: pointer;
    transform: translate(-50%, -50%); /* Centraliza exato na coordenada */
    border: 2px solid transparent;
    transition: all 0.2s;
}

/* Efeito ao passar o mouse ou ativar */
.elec-node:hover, .elec-node.active {
    background-color: #ff0000;
    box-shadow: 0 0 10px #ff0000;
    border-color: white;
}

/* O nó inicial ou visitado */
.elec-node.visited {
    background-color: #ff0000;
    box-shadow: 0 0 5px #ff0000;
}

/* --- LINHAS NEON VERMELHAS --- */
#electric-neon-lines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* Deixa clicar através das linhas */
}

.electric-line {
    stroke: #ff0000; /* Vermelho Neon */
    stroke-width: 3;
    stroke-linecap: round;
    filter: drop-shadow(0 0 3px #ff0000) drop-shadow(0 0 5px #8b0000);
    animation: drawLine 0.5s ease-out forwards;
}

@keyframes drawLine {
    from { opacity: 0; }
    to { opacity: 1; }
}

#close-electric-button {
    position: absolute;
    top: 20px;
    right: 20px;
    background: red;
    color: white;
    border: none;
    font-size: 20px;
    cursor: pointer;
    padding: 10px 15px;
    border-radius: 5px;
}

#electric-feedback {
    position: absolute;
    bottom: 20px;
    color: white;
    font-family: monospace;
    font-size: 1.2em;
    text-shadow: 0 0 5px black;
}
/* Destaque para o nó inicial para o jogador saber onde fechar o ciclo */
.elec-node.start-node {
    border: 2px solid #FFF; /* Borda branca fixa */
    box-shadow: 0 0 15px #FF0000;
}

/* --- Hotspot da Cafeteria (Mapa Principal) --- 
////////////////////////////////////////////////*/

#cafeteria-hotspot {
    position: absolute;
    width: 200px;
    height: 200px;
    left: 2600px; /* <--- AJUSTE ISSO PARA O LOCAL DA CAFETERIA */
    top: 3100px;  /* <--- AJUSTE ISSO PARA O LOCAL DA CAFETERIA */
    /*background-color: rgba(0,0,255,0.5);  /* Descomente para ver e ajustar */
    z-index: 10;
}

#cafeteria-interaction-message {
    position: absolute;
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 10px;
    display: none;
    z-index: 20;
}

/* --- TELA DA FASE 3 --- */
#hull-repair-screen {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background-color: #111;
    display: none; /* Escondido por padrão */
    justify-content: center;
    align-items: center;
    z-index: 400;
}

#hull-wrapper {
    position: relative;
    width: 90vw;
    height: 90vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

#hull-bg-image {
    width: 100%;
    height: 100%;
    object-fit: contain; /* Ajusta a imagem sem distorcer */
}

/* Camada dos Slots (Buracos) */
#hull-slots-layer {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
}

#slot-0  { left: 18.5%; top: 87%; }
#slot-1  { left: 23.8%; top: 89%; }
#slot-2  { left: 26.9%; top: 72%; }
#slot-3  { left: 33.5%; top: 78%; }
#slot-4  { left: 35.5%; top: 60%; }
#slot-5  { left: 40.4%; top: 49%; }
#slot-6  { left: 44.7%; top: 58%; }
#slot-7  { left: 46.3%; top: 39.6%; }
#slot-8  { left: 52.4%; top: 25.6%; }
#slot-9  { left: 55.2%; top: 38.6%; }
#slot-10 { left: 59.6%; top: 21%; }

.hull-slot {
    position: absolute;
    width: 185px; /* Tamanho aproximado de cada pedaço */
    height: 185px;
    background-color: transparent;

    transform: translate(-50%, -50%);
    /* VOCÊ TERÁ QUE POSICIONAR CADA UM NO JS OU CSS DEPOIS */
}

.hull-slot.filled {
    border: none;
    background-color: transparent; /* Fica transparente quando preenchido */
}

/* Barra Lateral das Peças */
#hull-sidebar {
    position: absolute;
    right: 9%; /* Ajuste para cair em cima do bloco cinza da imagem */
    top: 22%;
    width: 150px;
    height: 70%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.hull-option:hover {
    transform: scale(1.1);
}

#hull-feedback {
    position: absolute;
    bottom: 20px;
    color: white;
    font-size: 1.5em;
    font-family: sans-serif;
    text-shadow: 0 0 5px black;
}

/* --- Atualize a classe .hull-option --- */
.hull-option {
    width: 80px; 
    height: 80px;
    margin: 35px 0;
    cursor: grab;
    transition: transform 0.2s;
    border-radius: 10px;
    
    /* MUDANÇA: Configuração para Div com Imagem de Fundo */
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    position: relative; /* Necessário para centralizar o ponto */
}

/* --- Atualize o #dragged-piece --- */
#dragged-piece {
    position: fixed;
    width: 190px; 
    height: 190px; 
    pointer-events: none; 
    z-index: 500;
    opacity: 0.9;
    
    /* Configuração de Fundo */
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

/* --- VOLTANDO COM AS BOLINHAS (VERSÃO SUAVE) --- */

/* Estilo base da bolinha */
.piece-yellow::after,
.piece-blue::after,
.piece-red::after,
.piece-green::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* Centraliza */
    
    width: 20px; 
    height: 20px;
    border-radius: 50%;
    
    /* MUDANÇA: Opacidade para ver a imagem através da bola */
    opacity: 0.4; 
    
    /* Sombra suave para destacar sem pesar */
    box-shadow: 0 0 4px rgba(0,0,0,0.8);
    
    /* Removemos a borda grossa, deixamos sem borda ou muito fina */
    border: 1px solid rgba(255, 255, 255, 0.5); 
    
    pointer-events: none; /* Garante que o clique passe pela bola */
}

/* Cores das bolinhas */
.piece-yellow::after { background-color: yellow; }
.piece-blue::after   { background-color: cyan; }
.piece-red::after    { background-color: red; }
.piece-green::after  { background-color: lime; }

/* Removemos estilos extras da peça em si */
.piece-yellow, .piece-blue, .piece-red, .piece-green {
    box-shadow: none;
    border: none;
    background-color: transparent; /* Garante que o fundo não tenha cor */
}

/* --- FASE 4: MOTOR (HUD E ITENS) --- */

/* O Hotspot da Mecânica */
#engine-hotspot {
    position: absolute;
    width: 150px;
    height: 150px;
    /* AJUSTE PARA A SALA DE MÁQUINAS */
    left: 3400px; 
    top: 2000px;
    /*background-color: rgba(255, 165, 0, 0.5);  /* Debug */
    z-index: 5;
}

#engine-message {
    position: absolute;
    background-color: rgba(255, 255, 255, 0.8);
    color: orange;
    padding: 5px 10px;
    border: 1px solid orange;
    display: none;
    z-index: 20;
    left: 3400px; /* Ajuste perto do hotspot */
    top: 2000px;
}

/* HUD (Inventário) no canto inferior esquerdo */
#engine-hud {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background-color: rgba(0, 0, 0, 0.8);
    border: 2px solid #555;
    padding: 10px;
    border-radius: 10px;
    z-index: 500;
    display: none; /* Começa escondido */
    font-family: sans-serif;
}

.hud-title {
    color: white;
    font-weight: bold;
    margin-bottom: 5px;
    text-align: center;
}

#hud-slots {
    display: flex;
    gap: 10px;
}

.hud-slot {
    width: 60px;
    height: 60px;
    border: 2px dashed #555;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.hud-slot img {
    width: 90%;
    height: 90%;
    object-fit: contain;
    opacity: 0.05; /* Apagado quando não tem */
    filter: grayscale(100%);
}

.hud-slot.acquired {
    border: 2px solid #00FF00;
    box-shadow: 0 0 10px #00FF00;
}

.hud-slot.acquired img {
    opacity: 1;
    filter: grayscale(0%);
}

#hud-status {
    margin-top: 5px;
    color: orange;
    text-align: center;
    font-weight: bold;
}

/* ITENS NO MAPA (Que o jogador coleta) */
.map-item {
    position: absolute;
    width: 50px;
    height: 50px;
    z-index: 4;
    cursor: pointer;
    transform: translate(-50%, -50%);
    animation: itemFloat 2s infinite ease-in-out;
}
/* Efeito visual para destacar o item no chão */
.map-item img {
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 0 5px white);
}

@keyframes itemFloat {
    0%, 100% { transform: translate(-50%, -50%) translateY(0); }
    50% { transform: translate(-50%, -50%) translateY(-10px); }
}

/* PONTOS NO MINIMAPA */
.minimap-item-dot {
    position: absolute;
    width: 8px;
    height: 8px;
    background-color: black; /* Como pedido */
    border: 1px solid white; /* Borda para ver no fundo escuro */
    border-radius: 50%;
    z-index: 205; /* Acima do mapa, abaixo do jogador */
}

/* --- SISTEMA DE MENSAGENS NO JOGO --- */
#game-alert-overlay {
    position: fixed;
    top: 15%; /* Fica um pouco abaixo do topo */
    left: 50%;
    transform: translateX(-50%);
    z-index: 2000; /* Acima de TUDO */
    pointer-events: none; /* Deixa clicar através dele */
    display: none; /* Começa escondido */
}

#game-alert-box {
    background-color: rgba(0, 0, 0, 0.9);
    padding: 15px 30px;
    border-radius: 8px;
    border: 2px solid white;
    box-shadow: 0 0 20px rgba(0,0,0,0.8);
    text-align: center;
    
    /* Animação de entrada */
    animation: slideDownFade 0.3s ease-out;
}

#game-alert-text {
    font-family: 'Arial', sans-serif; /* Ou sua fonte de pixel art */
    font-size: 1.2em;
    font-weight: bold;
    color: white;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Tipos de Mensagem (Adicionados via JS) */
.alert-success {
    border-color: #00FF00 !important;
    box-shadow: 0 0 15px #00FF00 !important;
}
.alert-success #game-alert-text { color: #00FF00; }

.alert-error {
    border-color: #FF0000 !important;
    box-shadow: 0 0 15px #FF0000 !important;
}
.alert-error #game-alert-text { color: #FF0000; }

.alert-info {
    border-color: #00FFFF !important;
    box-shadow: 0 0 15px #00FFFF !important;
}
.alert-info #game-alert-text { color: #00FFFF; }

@keyframes slideDownFade {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- TELA DE TELEPORTE (EFEITO VULTO) --- */
/* O GIF do teleporte */
/*
#teleport-visual-effect {
    position: absolute;
    width: 250px; Um pouco maior que o player 
    height: auto;
    z-index: 100; /* Fica na frente de tudo no mapa 
    pointer-events: none;
    transform: translate(-50%, -50%); /* Centraliza na coordenada 
}

/* O Efeito de "Vulto" (Desvanecimento Rápido) */
/* Vamos adicionar essa classe ao #game-container via JS durante o teleporte 
.teleport-vulto {
    animation: vulto-anim 0.5s ease-in-out;
}

@keyframes vulto-anim {
    0% { filter: blur(0px) brightness(1); opacity: 1; }
    50% { filter: blur(10px) brightness(2); opacity: 0.5; } /* Borra e brilha 
    100% { filter: blur(0px) brightness(1); opacity: 1; }
}
#teleport-message {
    position: absolute;
    background-color: rgba(0, 0, 0, 0.8);
    color: #00FFFF; /* Ciano para diferenciar 
    border: 1px solid #00FFFF;
    padding: 5px 10px;
    border-radius: 5px;
    font-family: sans-serif;
    font-size: 0.9em;
    white-space: nowrap;
    display: none; /* Começa escondido 
    z-index: 999!important;
    pointer-events: none;
    display: block !important; 
    
    /* Animação suave 
    animation: bounce 1s infinite alternate;
}

@keyframes bounce {
    from { transform: translateY(0); }
    to { transform: translateY(-5px); }
}*/
#cutscene-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: black;
    z-index: 5000; /* Acima de absolutamente tudo */
    display: flex;
    justify-content: center;
    align-items: center;
    
    /* Prepara a transição de opacidade */
    opacity: 1;
    transition: opacity 1s ease-out; /* O fade dura 1 segundo */
}

/* Classe que será adicionada via JS no final do vídeo */
#cutscene-overlay.fade-out {
    opacity: 0;
    pointer-events: none;
}

#cutscene-video {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Garante que preencha a tela sem bordas pretas */
}


